#include "user_bus.h"

typedef union
{
    uint8  auchValue[2];
    uint16 uinValue;
    int16  inValue;
}BYTE2_U;

typedef union
{
    uint8  auchValue[4];
    fp32   fValue;
    uint32 ulValue;
    int32  lValue;
}BYTE4_U;

//==============================================================================
//| 函数名称 | Encodefp32()
//|----------|------------------------------------------------------------------
//| 函数功能 | fp32加码
//|----------|------------------------------------------------------------------
//| 输入参数 | fData: 要加码的数据
//|          | p:  加码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 无
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
void Encodefp32(fp32 fValue, uint8 *p)
{
    BYTE4_U data;

    data.fValue = fValue;

#ifdef ENDIAN_BIG
    p[0] = data.auchValue[0];
    p[1] = data.auchValue[1];
    p[2] = data.auchValue[2];
    p[3] = data.auchValue[3];
#else
    p[0] = data.auchValue[3];
    p[1] = data.auchValue[2];
    p[2] = data.auchValue[1];
    p[3] = data.auchValue[0];
#endif
}

//==============================================================================
//| 函数名称 | Encodeuint32()
//|----------|------------------------------------------------------------------
//| 函数功能 | uint32加码
//|----------|------------------------------------------------------------------
//| 输入参数 | ulData: 要加码的数据
//|          | p:  加码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 无
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
void Encodeuint32(uint32 ulData, uint8 *p)
{
    BYTE4_U data;

    data.ulValue = ulData;

#ifdef ENDIAN_BIG
    p[0] = data.auchValue[0];
    p[1] = data.auchValue[1];
    p[2] = data.auchValue[2];
    p[3] = data.auchValue[3];
#else
    p[0] = data.auchValue[3];
    p[1] = data.auchValue[2];
    p[2] = data.auchValue[1];
    p[3] = data.auchValue[0];
#endif
}

//==============================================================================
//| 函数名称 | Encodeint32()
//|----------|------------------------------------------------------------------
//| 函数功能 | int32加码
//|----------|------------------------------------------------------------------
//| 输入参数 | lData: 要加码的数据
//|          | p:  加码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 无
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
void Encodeint32(int32 lData, uint8 *p)
{
    BYTE4_U data;

    data.lValue = lData;

#ifdef ENDIAN_BIG
    p[0] = data.auchValue[0];
    p[1] = data.auchValue[1];
    p[2] = data.auchValue[2];
    p[3] = data.auchValue[3];
#else
    p[0] = data.auchValue[3];
    p[1] = data.auchValue[2];
    p[2] = data.auchValue[1];
    p[3] = data.auchValue[0];
#endif
}


//==============================================================================
//| 函数名称 | Encodeuint16()
//|----------|------------------------------------------------------------------
//| 函数功能 | uint16加码
//|----------|------------------------------------------------------------------
//| 输入参数 | uinData: 要加码的数据
//|          | p:  加码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 无
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
void Encodeuint16(uint16 uinData, uint8 *p)
{
    BYTE2_U data;

    data.uinValue = uinData;

#ifdef ENDIAN_BIG
    p[0] = data.auchValue[0];
    p[1] = data.auchValue[1];
#else
    p[0] = data.auchValue[1];
    p[1] = data.auchValue[0];
#endif
}

//==============================================================================
//| 函数名称 | Encodeint16()
//|----------|------------------------------------------------------------------
//| 函数功能 | int16加码
//|----------|------------------------------------------------------------------
//| 输入参数 | inData: 要加码的数据
//|          | p:  加码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 无
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting 09.3.31
//==============================================================================
void Encodeint16(int16 inData, uint8 *p)
{
    BYTE2_U data;

    data.inValue = inData;

#ifdef ENDIAN_BIG
    p[0] = data.auchValue[0];
    p[1] = data.auchValue[1];
#else
    p[0] = data.auchValue[1];
    p[1] = data.auchValue[0];
#endif
}

//==============================================================================
//| 函数名称 | Decodefp32()
//|----------|------------------------------------------------------------------
//| 函数功能 | fp32解码
//|----------|------------------------------------------------------------------
//| 输入参数 | p:  解码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 解码数据值
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
fp32 Decodefp32(uint8 *p)
{
    BYTE4_U data;

#ifdef ENDIAN_BIG
    data.auchValue[0] = p[0];
    data.auchValue[1] = p[1];
    data.auchValue[2] = p[2];
    data.auchValue[3] = p[3];
#else
    data.auchValue[3] = p[0];
    data.auchValue[2] = p[1];
    data.auchValue[1] = p[2];
    data.auchValue[0] = p[3];
#endif

    return data.fValue;
}

//==============================================================================
//| 函数名称 | Decodeuint32()
//|----------|------------------------------------------------------------------
//| 函数功能 | uint32解码
//|----------|------------------------------------------------------------------
//| 输入参数 | p:  解码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 解码数据值
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
uint32 Decodeuint32(uint8 *p)
{
    BYTE4_U data;

#ifdef ENDIAN_BIG
    data.auchValue[0] = p[0];
    data.auchValue[1] = p[1];
    data.auchValue[2] = p[2];
    data.auchValue[3] = p[3];
#else
    data.auchValue[3] = p[0];
    data.auchValue[2] = p[1];
    data.auchValue[1] = p[2];
    data.auchValue[0] = p[3];
#endif

    return data.ulValue;
}

//==============================================================================
//| 函数名称 | Decodeint32()
//|----------|------------------------------------------------------------------
//| 函数功能 | int32解码
//|----------|------------------------------------------------------------------
//| 输入参数 | p:  解码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 解码数据值
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
int32 Decodeint32(uint8 *p)
{
    BYTE4_U data;

#ifdef ENDIAN_BIG
    data.auchValue[0] = p[0];
    data.auchValue[1] = p[1];
    data.auchValue[2] = p[2];
    data.auchValue[3] = p[3];
#else
    data.auchValue[3] = p[0];
    data.auchValue[2] = p[1];
    data.auchValue[1] = p[2];
    data.auchValue[0] = p[3];
#endif

    return data.lValue;
}

//==============================================================================
//| 函数名称 | Decodeuint16()
//|----------|------------------------------------------------------------------
//| 函数功能 | uint16解码
//|----------|------------------------------------------------------------------
//| 输入参数 | p:  解码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 解码数据值
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
uint16 Decodeuint16(uint8 *p)
{
    BYTE2_U data;

#ifdef ENDIAN_BIG
    data.auchValue[0] = p[0];
    data.auchValue[1] = p[1];
#else
    data.auchValue[1] = p[0];
    data.auchValue[0] = p[1];
#endif

    return data.uinValue;
}

//==============================================================================
//| 函数名称 | Decodeint16()
//|----------|------------------------------------------------------------------
//| 函数功能 | int16解码
//|----------|------------------------------------------------------------------
//| 输入参数 | p:  解码数组指针
//|----------|------------------------------------------------------------------
//| 返回参数 | 解码数据值
//|----------|------------------------------------------------------------------
//| 函数设计 | cailiting，2010-12-13
//==============================================================================
int16 Decodeint16(uint8 *p)
{
    BYTE2_U data;

#ifdef ENDIAN_BIG
    data.auchValue[0] = p[0];
    data.auchValue[1] = p[1];
#else
    data.auchValue[1] = p[0];
    data.auchValue[0] = p[1];
#endif

    return data.inValue;
}

